"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_assets_modules_github_editor_codemirror-linter-util_ts-app_assets_modules_github_editor_y-89a4a6"],{92838:(e,t,n)=>{n.d(t,{Y:()=>CodeMirrorLintingHelper,y:()=>r});var l=n(36162);let CodeMirrorLintingHelper=class CodeMirrorLintingHelper{clearState(){for(let e of this.lintMarks)e.clear(),e.destroyTooltip&&e.destroyTooltip();this.lintMarks.splice(0)}createMarks(e,t){for(let n of t){let{from:t,to:l,severity:r}=n,i=e.markText(t,l,{className:`CodeMirror-lint-mark CodeMirror-lint-mark-${r}`,__message:n});this.lintMarks.push(i)}}showTooltip(e,t){let n=t.target||t.srcElement;if(!n.classList.contains("CodeMirror-lint-mark"))return;let l=n.getBoundingClientRect(),r=(l.left+l.right)/2,i=(l.top+l.bottom)/2,s=function(e,t,n){let l=e.findMarksAt(e.coordsChar({left:t,top:n},"window"));if(0===l.length)return null;let r=l[0];return r.keepTooltip?(r.keepTooltip(),null):r}(e,r,i);if(!s)return;let{__message:o}=s;if(!o)return;let u=this.createTooltip(o,l.left,i),a=u.querySelector("select"),c=u.querySelector("button"),f=null,h=()=>{document.activeElement!==a&&(f=setTimeout(()=>{delete s.keepTooltip,delete s.destroyTooltip,u.parentElement&&(u.style.opacity="0",setTimeout(()=>u.parentElement&&u.parentElement.removeChild(u),600))},100))},d=()=>clearTimeout(f);CodeMirror.on(u,"mouseout",h),CodeMirror.on(n,"mouseout",h),CodeMirror.on(u,"mouseover",d),CodeMirror.on(n,"mouseover",d),s.keepTooltip=d,s.destroyTooltip=h;let p=t=>{let n=s.find();e.focus(),e.setSelection(n.from,n.to),e.replaceSelection(t),h()};c.addEventListener("click",()=>p(c.textContent)),a.addEventListener("change",()=>p(a.value)),a.addEventListener("focusout",h)}createTooltip(e,t,n){let{message:r,fixes:i}=e,s=document.querySelector("#yaml-lint-template"),o=document.importNode(s.content,!0).querySelector(".js-yaml-lint"),u=o.querySelector(".js-yaml-lint-header"),a=o.querySelector(".js-yaml-lint-title"),c=o.querySelector(".js-yaml-lint-subtitle"),f=o.querySelector(".js-yaml-lint-message"),h=o.querySelector(".js-yaml-lint-fixes"),d=c.querySelector("button");if(u.hidden=!i,f.hidden=!!i,c.hidden=!i,h.hidden=!i||i.length<2,i){(0,l.sY)(r,a);let e=i[0];d.textContent=e;let t=h.querySelector("select");for(let e of i.slice(1)){let n=document.createElement("option");n.textContent=e,t.appendChild(n)}}else(0,l.sY)(r,f);return document.body.appendChild(o),o.classList.add("CodeMirror-lint-tooltip"),o.style.opacity="1",o.style.left=`${t}px`,o.style.top=`${n-o.clientHeight-18}px`,o}constructor(){this.lintMarks=[]}};function r(e,t){let n=e.split("\n"),l=0,r=0;for(;r+n[l].length<t;)r+=n[l].length+1,l++;return{startLine:l,startColumn:t-r}}},13504:(e,t,n)=>{n.d(t,{r:()=>i});var l=n(93320),r=n.n(l);let i={load:r().load}},1877:(e,t,n)=>{n.d(t,{Hk:()=>u,m_:()=>s,nD:()=>i,x7:()=>c});var l=n(43878),r=n(2305);function i(e,t){return t.startsWith(e)&&e!==t}function s(e,t,n=[]){let l=t.toLowerCase(),r=n.map(e=>e.toLowerCase());return e.filter(e=>{let t=String(("object"==typeof e&&"text"in e?e.text:null)||e).toLowerCase();return i(l,t)&&!r.includes(t)})}async function o(e,t,n,r,i,o){let u;if(n.single&&1===n.single.length&&"boolean"===n.single[0])u=["true","false"];else{if(!n.values)return null;u=await (0,l.N)(n,e,t)}let a=s(u,r,i);return 0===a.length?null:a.map(e=>({displayText:e,snippet:{tokens:[o?`[${e}]`:e]},replace:r}))}async function u(e,t,n,l){try{let{simplifiedText:i,lastLine:s}=(0,r.CH)(t),{result:o,lastValue:u,consumeKey:c}=(0,r.Qc)(i,""),{path:f,lastValue:h}=(0,r.jA)(o),d=null!=u?u:h;c&&f.pop();let p=null!==s.match(/^\s*(-\s*)?$/)||-1===s.indexOf(":"),{result:g}=(0,r.Qc)(t,e.substring(t.length)),m=(0,r.h)(g,f),y=function(e,t){let n=(0,r.DY)(e,t);return Array.isArray(n)?n.map(String):[]}(g,f);return await a(n,l,g,f,d,[...m,...y],p)}catch(e){return null}}async function a(e,t,n,i,u,a,c){var f;let h=e({}),d=(0,l.s)(i,h);if(!d)return null;let p=(0,r.DY)(n,i),g=Array.isArray(p);if(g&&!0!==d.multipleValues)return null;if(!c||g||!d.rules){let e=!g&&!0===d.multipleValues;return(t?await t(n,i,u):null)||await o(n,i,d,u,a,e)}return s(Object.keys(f=d.rules),u,a).map(e=>{let t=f[e],n=t.single||t.values?" ":!t.rules||t.items||t.map?t.rules||!t.items||t.map?"":"\n	- ":"\n	";return{displayText:e,snippet:{tokens:[`${e}:${n}`]},replace:u,description:t.description}})}function c(e){let t=e.match(/^\.(.+)?|\['(.+?)('\])?$/);return t?t[1]||t[2]||"":e}},2305:(e,t,n)=>{n.d(t,{CH:()=>v,DY:()=>s,Fo:()=>y,Jg:()=>k,K0:()=>c,Lb:()=>x,M9:()=>g,Qc:()=>$,Qg:()=>h,W7:()=>u,fm:()=>a,g:()=>f,h:()=>o,iF:()=>p,jA:()=>w,lj:()=>m,p0:()=>d});var l=n(36162),r=n(35847),i=n(13504);function s(e,t){let n=e;for(let e of t){if("object"!=typeof n||null==n)return null;n=n[e]}return n}function o(e,t){var n;return null==(n=s(e,t))||"object"!=typeof n||Array.isArray(n)?[]:Object.keys(n)}function u(e){return(0,l.dy)` <code>${e}</code> `}function a(e){return(0,l.dy)` ${e.map((e,t)=>(0,l.dy)` ${t>0?", ":""}${u(e)} `)} `}function c(e){let t=e.match(/^\s*/);return t?t[0]:""}function f(e,t,n){return e.replace(/\t/g,t).replace(/\n/g,`
${n}`)}function h(e){return e.includes("${{")}function d(e){let t=RegExp(/\${{\s*(fromJSON|toJSON|contains|startsWith|endsWith|format|join)\((.*)\)\s*}}/,"i");return null!=e.match(t)}function p(e){let t=RegExp(/\${{\s*fromJSON\((.*)\)\s*}}/,"i");return null!=e.match(t)}function g(e){let t;let n=RegExp(/\${{(.+?)}}/,"g"),l=[];for(;null!==(t=n.exec(e));)l.push(t[1]?.trim());return l}function m(e){let t=[],n=e.match(/\${{([^}]*)}}/g)||[];for(let e of n){let n=e.match(/inputs\.([^\s}]+)/g)||[];for(let e of n)t.push(e)}return t}function y(e){let t=e.replace(/\${{([^}]*)}}/g,"").trim();return""!==t}function v(e){let t=e.split("\n"),n=t[t.length-1],l=c(n),r=n.substring(l.length).startsWith("-"),i=t.slice(0,t.length-1).map(e=>{let t=c(e);if(t.length>l.length||t.length===l.length&&!r)return"";let n=e.substring(t.length),i=n.match(/^-\s+/);if(i&&t.length+i[0].length>=l.length){let e=t.length+i[0].length;if(e>l.length)return"";if(e===l.length)return`${t}-`}return e});return i.push(n),{simplifiedText:i.join("\n"),lastLine:n}}function w(e){let t=[],n=e;for(;n&&"object"==typeof n;){let e=Object.keys(n),l=e[e.length-1];t.push(l),n=n[l]}let l=null!=n?String(n):"";return{path:t,lastValue:l}}function $(e,t){try{return{result:i.r.load(e+t),consumeKey:!1}}catch(l){let{message:n}=l;if(n.includes("mapping")){let n=e.match(/\w+$/);return{result:i.r.load(`${e}:${t}`),lastValue:n?n[0]:void 0,consumeKey:!0}}if(n.includes("collection")){let n=e.match(/,\s*$/),l=n?e.substring(0,e.length-n[0].length):e;return l+=t.match(/^\]/)?t:"]",{result:i.r.load(l),lastValue:n?"":void 0,consumeKey:!0}}throw l}}function b(e,t){let n=(0,r.Z)(e,t);return e.endsWith("-latest")?n-1:n}function k(e,t){return e.sort((e,n)=>b(e,t)-b(n,t))}let x=async(e,t,n)=>{if("string"!=typeof n)return;let l=new O(n);for(;!l.atEnd();){let e=l.scan(S);if(null!==e&&"\\"===e[0])return N("trailing backslash");let t=l.scan(T);if(null!==t){if(t[0].length>2)return N("too many sequential * characters");if(l.isNext("+"))return N("+ cannot follow *");if(l.isNext("?"))return N("? cannot follow *");continue}let n=l.scan(C);if(null!==n){if(n[0].length>1)return N("? cannot follow ?");continue}let r=l.scan(j);if(null!==r){if(r[0].length>1)return N("+ cannot follow +");if(l.isNext("?"))return N("? cannot follow +");continue}if(l.isNext("[")){l.takeOne();let e=l.scan(M);if(null===e)return N("empty character range");if(!l.isNext("]"))return N("unterminated character range");if(!e[0].match(E))return N("invalid character range");l.takeOne();continue}l.takeOne()}},S=/^\\.?/,j=/^\++/,C=/^\?+/,T=/^\*+/,M=/^[^\]]+/,E=/^\^?(?:(?:\d(?:-\d)?)|(?:[a-z](?:-[a-z])?))+$/i;function N(e){return{message:(0,l.dy)` ${e} `,severity:"error"}}let O=class Scanner{atEnd(){return 0===this.value.length}isNext(e){return this.value[0]===e}scan(e){let t=this.value.match(e);return null!==t&&(this.value=this.value.substring(t[0].length)),t}takeOne(){return this.value=this.value.substring(1),this.value[0]}constructor(e){this.value=e}}},51649:(e,t,n)=>{n.d(t,{Z:()=>h,p:()=>c});var l=n(43878),r=n(2305),i=n(36162),s=n(13504);function o(e,t){let n=(t.match(/^\s*/)||[""])[0];return{from:{line:e,ch:n.length},to:{line:e,ch:t.length}}}function u(e,t,n){let l=t.join("."),r=e[l],{message:i,fixes:s,severity:o}=n;return{message:i,fixes:s,severity:o,from:r.key.from,to:r.key.to}}function a(e,t,n){let l=t.join("."),r=e[l],{message:i,fixes:s,severity:o}=n;return{message:i,fixes:s,severity:o,from:r.value.from,to:r.value.to}}function c(e,t){let n=1===e.length?(0,i.dy)` ${(0,r.W7)(e[0])} was expected `:(0,i.dy)` one of ${(0,r.fm)(e)} were expected `;return{message:(0,i.dy)` Invalid type found: ${n} but ${t} was found `,severity:"error"}}async function f(e,t,n,s,o,h,d){if(void 0!==s){if(o.validateKey){let l=await o.validateKey(e,n);if(l&&(h.push(u(t,n,l)),"error"===l.severity))return}if(null===s){if(!0===o.nullable)return;h.push(a(t,n,{message:(0,i.dy)` This value cannot be null `,severity:"error"}))}else if("object"==typeof s){if(Array.isArray(s)){if(o.maxLength&&s.length>o.maxLength&&h.push(a(t,n,{message:(0,i.dy)` Maximum of ${o.maxLength.toString()} elements allowed `,severity:"error"})),o.values){if(!0!==o.multipleValues){h.push(a(t,n,{message:(0,i.dy)` Only a single value is allowed here `,severity:"error"}));return}let u=await (0,l.N)(o,e,n),c=s.map(String).filter(e=>!u.includes(e)),f=s.map(String).filter(e=>u.includes(e)),d=function(e){let t=new Set,n=new Set;for(let l of e)t.has(l)&&n.add(l),t.add(l);return[...n]}(f);if(d.length>0||c.length>0){let e=(0,i.dy)`
            ${d.length>0?(0,i.dy)` Repeated values: ${(0,r.fm)(d)} `:""}
            ${d.length>0&&c.length>0?(0,i.dy)` <br /> `:""}
            ${c.length>0?(0,i.dy)` Invalid values: ${(0,r.fm)(c)} `:""}
          `;h.push(a(t,n,{message:e,severity:"error"}))}}else if(o.items)for(let l in s)await f(e,t,[...n,l],s[l],o.items,h,d);else if(o.single||o.map||o.rules){let e=o.single||[];o.map&&e.push("map"),o.rules&&e.push("object"),h.push(a(t,n,c(e,"an array")))}}else if(o.map)for(let l in s)await f(e,t,[...n,l],s[l],o.map,h,d);else if(o.rules){let{rules:l}=o;for(let o in l)if(void 0!==s[o])await f(e,t,[...n,o],s[o],l[o],h,d);else if(!0===l[o].required){let e=0===n.length?"root key":"key";h.push(u(t,n,{message:(0,i.dy)` Missing required ${e} ${(0,r.W7)(o)} `,severity:"error"}))}for(let e in s)if(!o.rules[e]){let l=Object.keys(o.rules).filter(e=>void 0===s[e]),a=(0,i.dy)` Unknown key ${(0,r.W7)(e)} `,c=!1===o.sortSuggestions?l:(0,r.Jg)(l,e);h.push(u(t,[...n,e],{message:a,fixes:c,severity:"error"}))}}else if(o.single||o.items){let e=o.single||[];(o.values||o.items)&&e.push("array"),h.push(a(t,n,c(e,s instanceof Date?"a date":"an object")))}}else{let u=String(s);if((0,r.Qg)(u)&&d){let l=await d(e,n,u,o);l&&h.push(a(t,n,l));return}if(o.validateValue){let l=await o.validateValue(e,n,s);if(l&&(h.push(a(t,n,l)),"error"===l.severity))return}if(o.single){let{single:e}=o,l=typeof s;e.includes(l)||h.push(a(t,n,c(e,(0,r.W7)(l))))}else if(o.values){let c=await (0,l.N)(o,e,n),f=c.includes(o.caseInsensitive?u.toLowerCase():u);if(!f){let e=!1===o.sortSuggestions?c:(0,r.Jg)(c,String(s));h.push(a(t,n,{message:(0,i.dy)` Invalid value: ${(0,r.W7)(u)} `,fixes:e,severity:"error"}))}}else if(o.map||o.rules||o.items){let e=null===s?"null":typeof s,l=[];(o.map||o.rules)&&l.push("object"),o.items&&l.push("array"),h.push(a(t,n,c(l,(0,r.W7)(e))))}}}}async function h(e,t){let n={},l=e.split("\n");try{if(l.length>0){let e={from:{line:0,ch:0},to:{line:l.length-1,ch:l[l.length-1].length}};n[""]={key:e,value:e}}let e=null;for(let t=0;t<l.length;t++){let r=l.slice(0,t+1).join("\n");e=s.r.load(r),function e(t,n,l,r,i){if(void 0===l)return;let s=r.join(".");if(s&&!t[s]){let e=n[i],u=r[r.length-1];t[s]={key:function(e,t,n){let l=t.indexOf(n);return -1===l?o(e,t):{from:{line:e,ch:l},to:{line:e,ch:l+n.length}}}(i,e,u),value:function(e,t,n){if("object"==typeof n&&null!==n)return o(e,t);let l=String(n),r=t.lastIndexOf(l);return -1===r?o(e,t):{from:{line:e,ch:r},to:{line:e,ch:r+l.length}}}(i,e,l)}}if("object"==typeof l)for(let s in l)l.hasOwnProperty(s)&&e(t,n,l[s],[...r,s],i)}(n,l,e,[],t)}let r=[],i=t(e);return await f(e,n,[],e,i,r,i.processExpression),r}catch(o){let{mark:e}=o;if(!e)return[];let{line:t,column:n}=e,r=t>=l.length||o.reason.match(/end of the stream within a flow collection/)?t-1:t,s=n>=l[r].length?0:n;return[{message:(0,i.dy)` ${o.reason} `,severity:"error",from:{line:r,ch:s},to:{line:r,ch:l[r].length}}]}}},43878:(e,t,n)=>{async function l(e,t,n){if(!e.values)throw Error("Cannot get values of rule because `values` is not defined");return"function"==typeof e.values?await e.values(t,n):e.values}function r(e,t){let n=t;for(let t of e)if(Number.isInteger(+t)){if(!n.items)return null;n=n.items}else if(n.map)n=n.map;else{if(!n.rules||!n.rules[t])return null;n=n.rules[t]}return n}n.d(t,{N:()=>l,s:()=>r})}}]);
//# sourceMappingURL=app_assets_modules_github_editor_codemirror-linter-util_ts-app_assets_modules_github_editor_y-89a4a6-d609ed7f88f3.js.map