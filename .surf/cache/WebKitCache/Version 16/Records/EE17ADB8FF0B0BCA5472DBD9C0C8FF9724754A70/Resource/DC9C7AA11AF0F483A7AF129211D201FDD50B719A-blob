"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["node_modules_scroll-anchoring_dist_scroll-anchoring_esm_js-app_components_notifications_notif-fce33d"],{96776:(e,t,n)=>{function r(e,t){return i(function(e){if(e.activeElement!==e.body)return e.activeElement;var t=e.querySelectorAll(":hover"),n=t.length;if(n)return t[n-1]}(e),t)}function i(e,t){var n=e;if(!n)return Promise.resolve(t());var r=n.ownerDocument.documentElement,i=function(e){for(var t=[];e;){var n=e.getBoundingClientRect(),r=n.top,i=n.left;t.push({element:e,top:r,left:i}),e=e.parentElement}return t}(n);return Promise.resolve(t()).then(function(e){var t=function(e){for(var t=0;t<e.length;t++){var n=e[t];if(r.contains(n.element))return n}}(i);if(t){n=t.element;var o=t.top,l=t.left,a=n.getBoundingClientRect(),s=a.top,c=a.left;!function(e,t,n){var r=e.ownerDocument,i=r.defaultView;function o(e){return e.offsetParent?{top:e.scrollTop,left:e.scrollLeft}:{top:i.pageYOffset,left:i.pageXOffset}}function l(e){var t=e;if(t.offsetParent&&t!==r.body){for(;t!==r.body;){if(!t.parentElement)return;t=t.parentElement;var n=i.getComputedStyle(t),o=n.position,l=n.overflowY,a=n.overflowX;if("fixed"===o||"auto"===l||"auto"===a||"scroll"===l||"scroll"===a)break}return t}}for(var a=l(e),s=0,c=0;a;){var u=function(e,t,n){if(0===t&&0===n)return[0,0];var l=o(e),a=l.top+n,s=l.left+t;e===r||e===i||e===r.documentElement||e===r.body?r.defaultView.scrollTo(s,a):(e.scrollTop=a,e.scrollLeft=s);var c=o(e);return[c.left-l.left,c.top-l.top]}(a,t-s,n-c);if(s+=u[0],c+=u[1],s===t&&c===n)break;a=l(a)}}(n,c-l,s-o)}return e})}n.d(t,{_8:()=>r,uQ:()=>i})},34090:(e,t,n)=>{n.d(t,{I:()=>a,n:()=>l});var r=n(39629);let i=["notification_referrer_id","notifications_before","notifications_after","notifications_query"],o="notification_shelf";function l(e,t=null){return e.has("notification_referrer_id")?(function(e,t){let n=s(t);if(!n)return;let l={pathname:n};for(let t of i){let n=e.get(t);n&&(l[t]=n)}(0,r.LS)(o,JSON.stringify(l))}(e,t),function(e){for(let t of i)e.delete(t);return e}(e)):null}function a(e=null){let t=s(e);if(!t)return(0,r.cl)(o),null;try{let e=(0,r.rV)(o);if(!e)return null;let n=JSON.parse(e);if(!n||!n.pathname)throw Error("Must have a pathname");if(n.pathname!==t)throw Error("Stored pathname does not match current pathname.");let l={};for(let e of i)l[e]=n[e];return l}catch(e){return(0,r.cl)(o),null}}function s(e){e=e||window.location.pathname;let t=e.match(/^(\/[^/]+\/[^/]+\/pull\/[^/]+)/);return t?t[0]:null}},51284:(e,t,n)=>{n.r(t),n.d(t,{NotificationShelfWatcherElement:()=>a});var r=n(76006),i=n(22971),o=n(34090);function l(e,t,n,r){var i,o=arguments.length,l=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(l=(o<3?i(l):o>3?i(t,n,l):i(t,n))||l);return o>3&&l&&Object.defineProperty(t,n,l),l}let a=class NotificationShelfWatcherElement extends HTMLElement{connectedCallback(){this.preload(),this.update(),this.addEventListener("socket:message",this.update.bind(this))}preload(){this.src=this.preloadSrc()}preloadSrc(){let e=this.getAttribute("src");if(e&&""!==e){let t=this.ownerDocument.createElement("a");return t.href=e,t.href}if(!this.baseUrl)return"";let t=(0,o.I)();if(!t)return"";let n=new URL(this.baseUrl,window.location.origin),r=new URLSearchParams(n.search);for(let[e,n]of Object.entries(t))"string"==typeof n&&r.set(e,n);return n.search=r.toString(),n.toString()}async update(){if(this.timeout&&clearTimeout(this.timeout),!this.src||""===this.src)return;let e=this.placeholder();if(!e)return;let t=e.hasAttribute("data-initial");e.setAttribute("data-url",this.src),await (0,i.x0)(e),t&&this.refresh()}placeholder(){return document.querySelector("[data-target='notification-shelf-watcher.placeholder']")}refresh(){let e=this.placeholder();if(!e)return;let t=e.querySelector("[data-notification-status='unread']");t&&(this.timeout=setTimeout(()=>this.update(),this.refreshDelay))}constructor(...e){super(...e),this.refreshDelay=500}};l([r.Lj],a.prototype,"baseUrl",void 0),l([r.Lj],a.prototype,"refreshDelay",void 0),a=l([r.Ih],a)},14840:(e,t,n)=>{n.d(t,{Z:()=>p});let r="data-close-dialog",i=`[${r}]`;function o(e){let t=Array.from(e.querySelectorAll("[autofocus]")).filter(a)[0];t||(t=e,e.setAttribute("tabindex","-1")),t.focus()}function l(e){let t=e.currentTarget;t instanceof Element&&("Escape"===e.key||"Esc"===e.key?(f(t,!1),e.stopPropagation()):"Tab"===e.key&&function(e){if(!(e.currentTarget instanceof Element))return;let t=e.currentTarget.querySelector("details-dialog");if(!t)return;e.preventDefault();let n=Array.from(t.querySelectorAll("*")).filter(a);if(0===n.length)return;let r=e.shiftKey?-1:1,i=t.getRootNode(),o=t.contains(i.activeElement)?i.activeElement:null,l=-1===r?-1:0;if(o instanceof HTMLElement){let e=n.indexOf(o);-1!==e&&(l=e+r)}l<0?l=n.length-1:l%=n.length,n[l].focus()}(e))}function a(e){var t;return e.tabIndex>=0&&!e.disabled&&!(t=e).hidden&&(!t.type||"hidden"!==t.type)&&(t.offsetWidth>0||t.offsetHeight>0)}function s(e){let t=e.querySelector("details-dialog");return!(t instanceof DetailsDialogElement)||t.dispatchEvent(new CustomEvent("details-dialog-close",{bubbles:!0,cancelable:!0}))}function c(e){if(!(e.currentTarget instanceof Element))return;let t=e.currentTarget.closest("details");t&&t.hasAttribute("open")&&!s(t)&&(e.preventDefault(),e.stopPropagation())}function u(e){let t=e.currentTarget;if(!(t instanceof Element))return;let n=t.querySelector("details-dialog");if(n instanceof DetailsDialogElement){if(t.hasAttribute("open")){let e="getRootNode"in n?n.getRootNode():document;e.activeElement instanceof HTMLElement&&g.set(n,{details:t,activeElement:e.activeElement}),o(n),t.addEventListener("keydown",l)}else{for(let e of n.querySelectorAll("form"))e.reset();let e=function(e,t){let n=g.get(t);return n&&n.activeElement instanceof HTMLElement?n.activeElement:e.querySelector("summary")}(t,n);e&&e.focus(),t.removeEventListener("keydown",l)}}}function f(e,t){t!==e.hasAttribute("open")&&(t?e.setAttribute("open",""):s(e)&&e.removeAttribute("open"))}function d(e){let t=e.currentTarget;if(!(t instanceof Element))return;let n=t.querySelector("details-dialog");if(!(n instanceof DetailsDialogElement))return;let r=n.querySelector("include-fragment:not([src])");if(!r)return;let i=n.src;null!==i&&(r.addEventListener("loadend",()=>{t.hasAttribute("open")&&o(n)}),r.setAttribute("src",i),m(t))}function h(e,t,n){m(e),t&&e.addEventListener("toggle",d,{once:!0}),t&&n&&e.addEventListener("mouseover",d,{once:!0})}function m(e){e.removeEventListener("toggle",d),e.removeEventListener("mouseover",d)}let g=new WeakMap;let DetailsDialogElement=class DetailsDialogElement extends HTMLElement{static get CLOSE_ATTR(){return r}static get CLOSE_SELECTOR(){return i}constructor(){super(),g.set(this,{details:null,activeElement:null}),this.addEventListener("click",function({target:e}){if(!(e instanceof Element))return;let t=e.closest("details");t&&e.closest(i)&&f(t,!1)})}get src(){return this.getAttribute("src")}set src(e){this.setAttribute("src",e||"")}get preload(){return this.hasAttribute("preload")}set preload(e){e?this.setAttribute("preload",""):this.removeAttribute("preload")}connectedCallback(){this.setAttribute("role","dialog"),this.setAttribute("aria-modal","true");let e=g.get(this);if(!e)return;let t=this.parentElement;if(!t)return;let n=t.querySelector("summary");n&&(n.hasAttribute("role")||n.setAttribute("role","button"),n.addEventListener("click",c,{capture:!0})),t.addEventListener("toggle",u),e.details=t,h(t,this.src,this.preload)}disconnectedCallback(){let e=g.get(this);if(!e)return;let{details:t}=e;if(!t)return;t.removeEventListener("toggle",u),m(t);let n=t.querySelector("summary");n&&n.removeEventListener("click",c,{capture:!0}),e.details=null}toggle(e){let t=g.get(this);if(!t)return;let{details:n}=t;n&&f(n,e)}static get observedAttributes(){return["src","preload"]}attributeChangedCallback(){let e=g.get(this);if(!e)return;let{details:t}=e;t&&h(t,this.src,this.preload)}};let p=DetailsDialogElement;window.customElements.get("details-dialog")||(window.DetailsDialogElement=DetailsDialogElement,window.customElements.define("details-dialog",DetailsDialogElement))},86058:(e,t,n)=>{n.d(t,{R:()=>AnalyticsClient});var r=n(82918);let AnalyticsClient=class AnalyticsClient{constructor(e){this.options=e}get collectorUrl(){return this.options.collectorUrl}get clientId(){return this.options.clientId?this.options.clientId:(0,r.b)()}createEvent(e){return{page:location.href,title:document.title,context:{...this.options.baseContext,...e}}}sendPageView(e){let t=this.createEvent(e);this.send({page_views:[t]})}sendEvent(e,t){let n={...this.createEvent(t),type:e};this.send({events:[n]})}send({page_views:e,events:t}){let n={client_id:this.clientId,page_views:e,events:t,request_context:{referrer:function(){let e;try{e=window.top.document.referrer}catch(t){if(window.parent)try{e=window.parent.document.referrer}catch(e){}}return""===e&&(e=document.referrer),e}(),user_agent:navigator.userAgent,screen_resolution:function(){try{return`${screen.width}x${screen.height}`}catch(e){return"unknown"}}(),browser_resolution:function(){let e=0,t=0;try{return"number"==typeof window.innerWidth?(t=window.innerWidth,e=window.innerHeight):null!=document.documentElement&&null!=document.documentElement.clientWidth?(t=document.documentElement.clientWidth,e=document.documentElement.clientHeight):null!=document.body&&null!=document.body.clientWidth&&(t=document.body.clientWidth,e=document.body.clientHeight),`${t}x${e}`}catch(e){return"unknown"}}(),browser_languages:navigator.languages?navigator.languages.join(","):navigator.language||"",pixel_ratio:window.devicePixelRatio,timestamp:Date.now(),tz_seconds:-60*new Date().getTimezoneOffset()}},r=JSON.stringify(n);try{if(navigator.sendBeacon){navigator.sendBeacon(this.collectorUrl,r);return}}catch{}fetch(this.collectorUrl,{method:"POST",cache:"no-cache",headers:{"Content-Type":"application/json"},body:r,keepalive:!1})}}},88149:(e,t,n)=>{n.d(t,{n:()=>r});function r(e="ha"){let t;let n={},r=document.head.querySelectorAll(`meta[name^="${e}-"]`);for(let i of Array.from(r)){let{name:r,content:o}=i,l=r.replace(`${e}-`,"").replace(/-/g,"_");"url"===l?t=o:n[l]=o}if(!t)throw Error(`AnalyticsClient ${e}-url meta tag not found`);return{collectorUrl:t,...Object.keys(n).length>0?{baseContext:n}:{}}}}}]);
//# sourceMappingURL=node_modules_scroll-anchoring_dist_scroll-anchoring_esm_js-app_components_notifications_notif-fce33d-24e973d5a153.js.map