"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_components_search_parsing_parsing_ts"],{91691:(e,s,t)=>{t.r(s),t.d(s,{SearchType:()=>o.Sc,chooseSearchType:()=>k,extractUnsupportedQualifiers:()=>h,getCaretPositionKindFromIndex:()=>g,getCustomScopeNames:()=>a,getExpandedQuery:()=>u,getHighlights:()=>S,getPossibleQualifierValues:()=>o.i$,mapSearchTypeToURLParam:()=>m,mapURLParamToSearchType:()=>C,moveCaretToPosition:()=>p,parseSearchInput:()=>r,parseString:()=>n,searchTypeAsPlural:()=>T});var o=t(42537),i=t(81732);let c=String.fromCharCode(160);function n(e){let s=RegExp(c,"g");return(0,o.Qc)(e.replace(s," "))}function r(e){let s=n(e),t=S(s);!function(e){e.sort((e,s)=>e.location.start-s.location.start)}(t);let o=[],i=0;for(let s of t)if(i<=s.location.start){o.push(e.substring(i,s.location.start).replace(" ",String.fromCharCode(160))),i=s.location.start;let t=document.createElement("span");t.classList.add(s.className),t.textContent=e.substring(s.location.start,s.location.end),o.push(t),i=s.location.end}return i<e.length&&o.push(e.substring(i).replace(" ",c)),[s,o]}function a(e){let s=[];l(s,e);let t=s.map(e=>e.content.value.toString());return[...new Set(t)]}function l(e,s){if((0,i.eH)(s)&&(0,o.hs)(s.content)&&e.push(s),(0,i.g8)(s))for(s of s.children)l(e,s)}function u(e,s,t){let i="",c=[];l(c,t);let n=0;for(let t of c)if((0,o.hs)(t.content)){i+=e.substring(n,t.location.start);let c=s.find(e=>o.hs(t.content)&&e.name===t.content.value)?.query;c&&(i+=c.replaceAll(" OR "," ")),n=t.content.location.end}return i+e.substring(n)}function p(e,s){let t=-1===s?e.value.length:s;e.focus(),e.setSelectionRange(t,t)}let f={And:{className:"pl-en",selector:"operatorLocation"},Not:{className:"pl-en",selector:"operatorLocation"},Or:{className:"pl-en",selector:"operatorLocation"},Regex:{className:"pl-c1",selector:"location"}};function S(e){let s;if((0,i.az)(e)&&d(e.content))s=[{className:"input-parsed-symbol",location:e.content.location}];else if(e.value&&("AND"===e.value||"OR"===e.value||"NOT"===e.value))s=[{className:"pl-en",location:e.location}];else{let t=f[e.kind];t&&("location"===t.selector&&d(e)&&(s=[{className:t.className,location:e.location}]),"operatorLocation"===t.selector&&e.operatorLocations&&(s=e.operatorLocations.map(e=>({className:t.className,location:e}))))}return(s=s??[],(0,i.g8)(e))?s.concat(e.children.flatMap(S)):(0,i.az)(e)?s.concat(S(e.content)):s}function d(e){return!!e.location}function g(e,s){let t=function e(s,t){if((0,i.g8)(s))for(let o of s.children){let s=e(o,t);if(s)return s}if(d(s)){let e=s.location.start,o=s.location.end;if((0,i.az)(s)&&d(s.content)&&(o=s.content.location.end),t>=e&&t<=o)return s}}(e,s);if(!t)return{kind:i.tT.Text};if("Regex"===t.kind)return{kind:i.tT.Regex};if((0,i.az)(t)){if("Is"===t.qualifier)return{kind:i.tT.Is,node:t};if("Language"===t.qualifier)return{kind:i.tT.Language,node:t};if("Path"===t.qualifier)return{kind:i.tT.Path,node:t};if("Repo"===t.qualifier)return{kind:i.tT.Repository,node:t};else if("Owner"===t.qualifier)return{kind:i.tT.Owner,node:t};else if("Org"===t.qualifier)return{kind:i.tT.Owner,node:t};else if("Saved"===t.qualifier)return{kind:i.tT.Saved,node:t};else return{kind:i.tT.OtherQualifier,node:t}}return{kind:i.tT.Text,node:t}}function h(e,s){let t=[];return!function e(c){if((0,i.az)(c)&&!(0,o.Td)(s,c.qualifier)){let e=c.raw.toLowerCase().substring(0,c.raw.length-1);t.includes(e)||t.push(e)}else if((0,i.az)(c)&&"Is"===c.qualifier){let e=c.content;if((0,o.hs)(e)){let i=e.value;s!==o.Sc.Issues&&"issue"===i?t.push("is:issue"):s!==o.Sc.PRs&&"pr"===i&&t.push("is:pr")}}if((0,i.g8)(c))for(let s of c.children)e(s)}(e),t}function k(e,s){let t={[o.Sc.Repositories]:.5,[o.Sc.Code]:.2,[o.Sc.Issues]:.1,[o.Sc.PRs]:0,[o.Sc.Discussions]:0,[o.Sc.Commits]:0,[o.Sc.Packages]:0,[o.Sc.Topics]:0,[o.Sc.Users]:0,[o.Sc.Orgs]:0,[o.Sc.Wikis]:0,[o.Sc.Marketplace]:-.4,[o.Sc.Unknown]:-1,[o.Sc.CodeLegacy]:-1};s||(t[o.Sc.Code]-=5);let c=[];for(let s of(function e(s,t){if((0,i.az)(s)){if("Repo"===s.qualifier&&t.push([[o.Sc.Repositories],2]),("Repo"===s.qualifier||"Org"===s.qualifier)&&t.push([[o.Sc.Code],0]),"Saved"===s.qualifier&&t.push([[o.Sc.Code],1]),(0,o.hs)(s.content)){"Regex"===s.content.kind&&t.push([[o.Sc.Code],1]);let e=s.content.value.toString().toLowerCase();if("Is"===s.qualifier)"pr"===e?t.push([[o.Sc.PRs],1]):"issue"===e?t.push([[o.Sc.Issues],1]):"sponsorable"===e&&t.push([[o.Sc.Users,o.Sc.Repositories],1]);else if("Type"===s.qualifier){let s=new Map([["commit",o.Sc.Commits],["discussion",o.Sc.Discussions],["issue",o.Sc.Issues],["marketplace",o.Sc.Marketplace],["org",o.Sc.Orgs],["package",o.Sc.Packages],["pr",o.Sc.PRs],["topic",o.Sc.Topics],["user",o.Sc.Users],["wiki",o.Sc.Wikis]]);s.has(e)&&t.push([[s.get(e)],3])}}let e=(0,o.PZ)(s.qualifier);e.length>0&&t.push([e,1])}else"Regex"===s.kind&&t.push([[o.Sc.Code],1]);if((0,i.g8)(s))for(let o of s.children)e(o,t)}(e,c),c)){let[e,o]=s;if(0===o)for(let s of e)t[s]+=1;else if(3===o)for(let s of e)t[s]+=1.5;else if(2===o)for(let s of e)t[s]-=1;else{let s={};for(let t of e)s[t]=!0;for(let e of Object.keys(t))s[e]||delete t[e]}}let n=Object.keys(t).map(e=>[e,t[e]]),r=o.Sc.Unknown;return n.length>0&&(n.sort((e,s)=>s[1]-e[1]),r=n[0][0]),r}function m(e){return({[o.Sc.Unknown]:"",[o.Sc.Code]:"code",[o.Sc.Repositories]:"repositories",[o.Sc.PRs]:"pullrequests",[o.Sc.Issues]:"issues",[o.Sc.Discussions]:"discussions",[o.Sc.Commits]:"commits",[o.Sc.Packages]:"registrypackages",[o.Sc.Marketplace]:"marketplace",[o.Sc.Topics]:"topics",[o.Sc.Users]:"users",[o.Sc.Orgs]:"users",[o.Sc.Wikis]:"wikis",[o.Sc.CodeLegacy]:"codelegacy"})[e]||""}function T(e){return({[o.Sc.Unknown]:"",[o.Sc.Code]:"code",[o.Sc.Repositories]:"repositories",[o.Sc.PRs]:"pull requests",[o.Sc.Issues]:"issues",[o.Sc.Discussions]:"discussions",[o.Sc.Commits]:"commits",[o.Sc.Packages]:"packages",[o.Sc.Marketplace]:"the marketplace",[o.Sc.Topics]:"topics",[o.Sc.Users]:"users",[o.Sc.Orgs]:"users",[o.Sc.Wikis]:"wikis",[o.Sc.CodeLegacy]:"code"})[e]||""}function C(e){return({"":o.Sc.Unknown,code:o.Sc.Code,repositories:o.Sc.Repositories,pullrequests:o.Sc.PRs,issues:o.Sc.Issues,discussions:o.Sc.Discussions,commits:o.Sc.Commits,registrypackages:o.Sc.Packages,marketplace:o.Sc.Marketplace,topics:o.Sc.Topics,users:o.Sc.Users,orgs:o.Sc.Orgs,wikis:o.Sc.Wikis,codelegacy:o.Sc.CodeLegacy})[e]||o.Sc.Unknown}}}]);
//# sourceMappingURL=app_components_search_parsing_parsing_ts-3b438ee8235a.js.map